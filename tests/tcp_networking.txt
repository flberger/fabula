Doctests for the Fabula Package
==============================

TCP Networking
--------------

    >>> import fabula.interfaces.python_tcp
    >>> import fabula.run
    >>> def run_server():
    ...     app = fabula.run.App(timeout = 5)
    ...     interface_class = fabula.interfaces.python_tcp.TCPServerInterface
    ...     app.run_server(60, interface_class, 0.5, threadsafe = True)
    ...
    >>> class TCPUI(fabula.plugins.ui.UserInterface):
    ...     def get_connection_details(self):
    ...         fabula.LOGGER.info('returning ("TCP_Client", ("127.0.0.1", 4011))')
    ...         return("TCP_Client", ("127.0.0.1", 4011))
    ...     def collect_player_input(self):
    ...         pass
    ...
    >>> def run_client():
    ...     app = fabula.run.App(timeout = 5)
    ...     app.user_interface_class = TCPUI
    ...     interface_class = fabula.interfaces.python_tcp.TCPClientInterface
    ...     app.run_client(60, interface_class)
    ...
    >>> import threading
    >>> server_process = threading.Thread(target = run_server)
    >>> client_process = threading.Thread(target = run_client)
    >>> server_process.start()
    >>> client_process.start()
    >>> server_process.join() # doctest: +ELLIPSIS
    ============================================================
    Fabula ... Server
    ------------------------------------------------------------
    <BLANKLINE>
    Listening on IP 0.0.0.0, port 4011
    <BLANKLINE>
    Press [Ctrl] + [C] to stop the server.
    <BLANKLINE>
    Shutting down server.
    <BLANKLINE>
    Shutdown complete. A log file should be at fabula-server.log
    <BLANKLINE>
    >>> client_process.join()
    >>>
