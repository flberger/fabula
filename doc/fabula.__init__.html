<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>fabula.__init__ : API documentation</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <link href="apidocs.css" type="text/css" rel="stylesheet" />
    
    
  </head>
  <body>
    <h1 class="module">f.__init__ : module documentation</h1>
    <p>
      <span id="part">Part of <a href="fabula.html">fabula</a></span>
      
      
    </p>
    <div>
      
    </div>
    <pre>Fabula  - An Open Source Python Game Engine

Copyright 2010 Florian Berger &lt;fberger@florian-berger.de&gt;


Overview
--------

Fabula is a client-server application.

The server side consists of instances of:

- fabula.core.server.Server
- fabula.plugins.Plugin
- fabula.interfaces.Interface

The Server manages the authoritative game state and communicates with the
clients. The Plugin contains the game logic and controls the Server's
reactions. The Interface manages the communication.

fabula.plugins.serverside.DefaultGame contains a default Plugin that reads
from configuration files.

The client side consists of instances of:

- fabula.core.client.Client
- fabula.plugins.ui.UserInterface
- fabula.interfaces.Interface

The Client communicates with the server and mirrors the Server game state.
The UserInterface presents the game to the player and collects player input.
The Interface manages the communication.

fabula.plugins.pygameui.PygameUserInterface contains a default 2D UserInterface.


Connection Procedure
--------------------

Before starting Client and Server, you must create one instance of
fabula.interfaces.Interface for each. Upon creation, these Interfaces are not
connected.

Once the Client.run() has been started, it will call
UserInterface.get_connection_details() to prompt the player for a client id
and information on how to connect to the Server Interface.

Given this information, Client.run() will call Interface.connect() which will
establish the actual network connection to the Server's Interface and add an
according fabula.interfaces.MessageBuffer in Interface.connections.

When Interface.connect() returns, Client.run() will send a fabula.InitEvent
using the client id given by the player. The Server will reply with a series
of Events that establish the first room.


Communication
-------------

Server and Client communicate by sending Events, each using the MessageBuffer
instance in Interface.connections.

Events are bundled into Messages. A Message represents a set of Events that
happen in parallel.</pre>

    
    
    <div id="splitTables">
      <table class="children sortable" id="id74">
  
  
<tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.Event.html">Event</a></td>
    <td><tt>Fabula event base class.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.AttemptEvent.html">AttemptEvent</a></td>
    <td><tt>This is the base class for attempt events by the player or NPCs.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.TriesToMoveEvent.html">TriesToMoveEvent</a></td>
    <td><tt>Issued when the player or an NPC wants to move, awaiting server confirmation.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.TriesToLookAtEvent.html">TriesToLookAtEvent</a></td>
    <td><tt>Issued when the player or an NPC looks at a map element or an item.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.TriesToPickUpEvent.html">TriesToPickUpEvent</a></td>
    <td><tt>Issued when the player or an NPC tries to pick up an item. Attempts to pick up NPCs are discarded or answered with an error.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.TriesToDropEvent.html">TriesToDropEvent</a></td>
    <td><tt>The player or NPC tries to drop an item.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.TriesToManipulateEvent.html">TriesToManipulateEvent</a></td>
    <td><tt>Issued when the player or an NPC tries to manipulate an item. NPCs cannot be manipulated.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.TriesToTalkToEvent.html">TriesToTalkToEvent</a></td>
    <td><tt>Issued when the player or an NPC wants to start a conversation with another entity. It is not possible to talk to items.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.ConfirmEvent.html">ConfirmEvent</a></td>
    <td><tt>This is the base class for server confirmations of attempt events.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.MovesToEvent.html">MovesToEvent</a></td>
    <td><tt>This is the server confirmation of a movement.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.PicksUpEvent.html">PicksUpEvent</a></td>
    <td><tt>This is a server confirmation of a TriesToPickUpEvent issued by the player or an NPC.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.DropsEvent.html">DropsEvent</a></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.CanSpeakEvent.html">CanSpeakEvent</a></td>
    <td><tt>This is a server invitation for the player or an NPC to speak. Since this event requires immediate user input, it is always executed as the last event of a Message by the UserInterface.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.AttemptFailedEvent.html">AttemptFailedEvent</a></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.PerceptionEvent.html">PerceptionEvent</a></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.ManipulatesEvent.html">ManipulatesEvent</a></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.InitEvent.html">InitEvent</a></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.ExitEvent.html">ExitEvent</a></td>
    <td><tt>This Event is sent by the Client or the Server to signal that it is about to exit and that no further Events will be sent.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.SaysEvent.html">SaysEvent</a></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.ChangePropertyEvent.html">ChangePropertyEvent</a></td>
    <td><tt>This Event is issued to trigger a property change. Each instance of fabula.Entity has a property.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.PassiveEvent.html">PassiveEvent</a></td>
    <td><tt>The base class for events when items or NPCs are being passed etc.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.PassedEvent.html">PassedEvent</a></td>
    <td><tt>Issued by the server when an item or an NPC is being passed by the player or an NPC.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.LookedAtEvent.html">LookedAtEvent</a></td>
    <td><tt>Issued by the server when an item or NPC is being looked at by the player or an NPC.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.PickedUpEvent.html">PickedUpEvent</a></td>
    <td><tt>Issued by the server when an item is being picked up by the player or an NPC.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.DroppedEvent.html">DroppedEvent</a></td>
    <td><tt>Issued by the server when an item is being dropped by the player or an NPC.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.ServerEvent.html">ServerEvent</a></td>
    <td><tt>Base class for various events issued by the server that are no ConfirmEvents, including map and room events.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.SpawnEvent.html">SpawnEvent</a></td>
    <td><tt>This event creates the player / new item / NPC on the map.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.DeleteEvent.html">DeleteEvent</a></td>
    <td><tt>This event deletes an item or NPC from the map. Note that items may still persist in the players posessions.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.EnterRoomEvent.html">EnterRoomEvent</a></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.RoomCompleteEvent.html">RoomCompleteEvent</a></td>
    <td><tt>Issued by the server after an EnterRoomEvent when the room is populated with a tiles, a player Entity, items and NPCs.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.ChangeMapElementEvent.html">ChangeMapElementEvent</a></td>
    <td><tt>This event changes a single element of the two-dimensional map. When sent in a Message, these events are executed immediately and in parallel upon the rendering of the Message by the UserInterface.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.ServerParametersEvent.html">ServerParametersEvent</a></td>
    <td><tt>This Event is sent by the Server when an InitEvent has been received. It informs the client about the Server parameters.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.Message.html">Message</a></td>
    <td><tt>A Message represents a set of Events that happen in parallel.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.Entity.html">Entity</a></td>
    <td><tt>An Entity is a Fabula game object. This is the base class for the player, NPCs and items. An Entity holds information used by the Fabula game logic:</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.Tile.html">Tile</a></td>
    <td><tt>A Tile is an element of a two-dimensional map. It is never meant to perform any active logic, so its only property is a type and an asset.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.Room.html">Room</a></td>
    <td><tt>A Room instance saves the map as well as Entities and their locations. It is maintained for the current room in the Client and for all active rooms in the Server.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.FloorPlanElement.html">FloorPlanElement</a></td>
    <td><tt>Convenience class for floor plan elements.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="fabula.Rack.html">Rack</a></td>
    <td><tt>A Rack stores Entities removed from a room. An instance of Rack is used by each Engine.</tt></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="fabula.html#difference_2d">difference_2d</a></td>
    <td><tt>Return the difference vector between a 2D start and end position.</tt></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="fabula.html#str_is_tuple">str_is_tuple</a></td>
    <td><tt>Return True if the string represents a (int, int[, str]) location tuple.</tt></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="fabula.html#representation">representation</a></td>
    <td><tt>Compute an official string representation of object. eval(representation(object)) should recreate the object. attributes is a list of strings giving the attributes to include.</tt></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="fabula.html#json_dump">json_dump</a></td>
    <td><tt>Return a JSON representation of the object.</tt></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="fabula.html#surrounding_positions">surrounding_positions</a></td>
    <td><tt>Return a list of tuples, representing the 8 surrounding positions around the tuple given. The list starts with the top left position and proceeds clockwise.</tt></td>
  </tr>
  
</table>
      
      
    </div>
    
    
    

    <div class="function">
  <a name="fabula.difference_2d">
    
  </a>
  <a name="difference_2d">
    
  </a>
  <div class="functionHeader">
    
    def
    difference_2d(start_tuple, end_tuple):
    
  </div>
  <div class="functionBody">
    
    <pre>Return the difference vector between a 2D start and end position.
    </pre>
  </div>
</div><div class="function">
  <a name="fabula.str_is_tuple">
    
  </a>
  <a name="str_is_tuple">
    
  </a>
  <div class="functionHeader">
    
    def
    str_is_tuple(str):
    
  </div>
  <div class="functionBody">
    
    <pre>Return True if the string represents a (int, int[, str]) location tuple.
    </pre>
  </div>
</div><div class="function">
  <a name="fabula.representation">
    
  </a>
  <a name="representation">
    
  </a>
  <div class="functionHeader">
    
    def
    representation(object, attributes):
    
  </div>
  <div class="functionBody">
    
    <pre>Compute an official string representation of object. eval(representation(object)) should recreate the object.
attributes is a list of strings giving the attributes to include.</pre>
  </div>
</div><div class="function">
  <a name="fabula.json_dump">
    
  </a>
  <a name="json_dump">
    
  </a>
  <div class="functionHeader">
    
    def
    json_dump(object):
    
  </div>
  <div class="functionBody">
    
    <pre>Return a JSON representation of the object.
    </pre>
  </div>
</div><div class="function">
  <a name="fabula.surrounding_positions">
    
  </a>
  <a name="surrounding_positions">
    
  </a>
  <div class="functionHeader">
    
    def
    surrounding_positions(position):
    
  </div>
  <div class="functionBody">
    
    <pre>Return a list of tuples, representing the 8 surrounding positions around the tuple given.
The list starts with the top left position and proceeds clockwise.</pre>
  </div>
</div>
    <address>
      <a href="index.html">API Documentation</a> for fabula, generated by <a href="http://codespeak.net/~mwh/pydoctor/">pydoctor</a> at 2013-09-01 22:57:40.
    </address>
  </body>
</html>